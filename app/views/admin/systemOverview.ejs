<%- include('../partials/header', { title: 'System Overview | Admin Panel' }) %>
<%- include('../partials/navigation') %>
<%- include('../partials/adminSidebar') %>

<style>
    body.system-settings-page {
        background-color: #f5f7fb;
        font-family: 'Inter', Arial, sans-serif;
        margin: 0;
        color: #1e293b;
    }

    .system-settings-main {
        padding: 40px;
        flex-grow: 1;
        min-height: 100vh;
        margin-left: 250px; /* Adjust based on sidebar width */
    }

    .system-settings-header {
        text-align: center;
        margin-bottom: 40px;
    }

    .system-settings-header h1 {
        font-size: 2.2rem;
        font-weight: 700;
        color: #0f172a;
        margin: 0;
    }

    /* Stats grid */
    .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 25px;
    }

    .stats-card {
        background: #ffffff;
        border-radius: 10px;
        padding: 25px 20px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.06);
        border: 1px solid #e2e8f0;
        text-align: center;
        transition: transform 0.2s ease, box-shadow 0.3s ease;
    }

    .stats-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 6px 15px rgba(0, 0, 0, 0.12);
    }

    .stats-card h2 {
        font-size: 1rem;
        color: #475569;
        font-weight: 600;
        margin-bottom: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
    }

    .stats-card h2 i {
        color: #3b82f6;
        font-size: 1.1rem;
    }

    .stats-card p {
        font-size: 2rem;
        font-weight: 700;
        color: #2563eb;
        margin: 0;
    }

    /* Settings section */
    .settings-section {
        background: #ffffff;
        padding: 30px;
        margin-top: 50px;
        border-radius: 10px;
        box-shadow: 0 3px 12px rgba(0, 0, 0, 0.05);
        border: 1px solid #e2e8f0;
        max-width: 700px;
        margin-left: auto;
        margin-right: auto;
    }

    .settings-section h3 {
        color: #0f172a;
        font-size: 1.3rem;
        font-weight: 700;
        margin-bottom: 20px;
    }

    .settings-section form label {
        display: block;
        font-weight: 600;
        color: #1e293b;
        margin-bottom: 6px;
    }

    .settings-section form input,
    .settings-section form select {
        width: 100%;
        padding: 10px 12px;
        margin-bottom: 20px;
        border: 1px solid #cbd5e1;
        border-radius: 6px;
        font-size: 1rem;
        color: #334155;
        background-color: #f8fafc;
        transition: border-color 0.2s ease;
    }

    .settings-section form input:focus,
    .settings-section form select:focus {
        border-color: #3b82f6;
        outline: none;
    }

    .settings-section form button {
        display: inline-block;
        background-color: #2563eb;
        color: white;
        padding: 12px 20px;
        border: none;
        border-radius: 6px;
        font-size: 1rem;
        font-weight: 600;
        cursor: pointer;
        transition: background-color 0.3s ease;
    }

    .settings-section form button:hover {
        background-color: #1d4ed8;
    }
    /* footer */
    .footer {
        text-align: center;
        padding: 15px 0;
        background: #1e293b;
        color: #f1f5f9;
        position: fixed;
        bottom: 0;
        width: calc(100% - 250px); /* Adjust based on sidebar width */
        margin-left: 250px; /* Adjust based on sidebar width */
    }

    @media (max-width: 768px) {
        .system-settings-main {
            padding: 20px;
        }

        .stats-grid {
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
        }

        .stats-card p {
            font-size: 1.6rem;
        }
    }
</style>

<div class="system-settings-main system-settings-page">

    <div class="system-settings-header">
        <h1>System Overview</h1>
    </div>

    <div class="stats-grid">
        <div class="stats-card">
            <h2><i class="fas fa-users"></i> Total Users</h2>
            <p><%= stats.totalUsers %></p>
        </div>
        <div class="stats-card">
            <h2><i class="fas fa-user-shield"></i> Admins</h2>
            <p><%= stats.admins %></p>
        </div>
        <div class="stats-card">
            <h2><i class="fas fa-chalkboard-teacher"></i> Teachers</h2>
            <p><%= stats.teachers %></p>
        </div>
        <div class="stats-card">
            <h2><i class="fas fa-user-graduate"></i> Students</h2>
            <p><%= stats.students %></p>
        </div>
        <div class="stats-card">
            <h2><i class="fas fa-signal"></i> Active Users</h2>
            <p><%= stats.activeUsers %></p>
        </div>
        <div class="stats-card">
            <h2><i class="fas fa-user-slash"></i> Inactive Users</h2>
            <p><%= stats.inactiveUsers %></p>
        </div>
        <div class="stats-card">
            <h2><i class="fas fa-book"></i> Total Courses</h2>
            <p><%= stats.totalCourses %></p>
        </div>
        <div class="stats-card">
            <h2><i class="fas fa-wallet"></i> Total Payments</h2>
            <p><%= stats.totalPayments %></p>
        </div>
        <div class="stats-card">
            <h2><i class="fas fa-dollar-sign"></i> Total Revenue</h2>
            <p>$<%= stats.totalRevenue %></p>
        </div>
    </div>

    <div class="settings-section" id="general-settings">
        <h3>General Settings</h3>
        <form action="/admin/settings/general" method="POST" enctype="multipart/form-data">
            <label for="site-name">Site Name</label>
            <input type="text" id="site-name" name="siteName" value="<%= settings.siteName %>" required>

            <label for="site-logo">Site Logo</label>
            <input type="file" id="site-logo" name="siteLogo">

            <label for="default-language">Default Language</label>
            <select id="default-language" name="defaultLanguage">
                <option value="en" <%= settings.defaultLanguage === 'en' ? 'selected' : '' %>>English</option>
                <option value="es" <%= settings.defaultLanguage === 'es' ? 'selected' : '' %>>Spanish</option>
            </select>

            <button type="submit">Save Changes</button>
        </form>
    </div>

</div>

<%- include('../partials/footer') %>
