<%- include('partials/header', { title: 'Settings - EDU LMS' }) %>
<%- include('partials/navigation') %>

<style>
  body {
    background: #f4f6f9;
    font-family: 'Segoe UI', Arial, sans-serif;
    margin: 0;
    color: #333;
  }

  .settings-container {
    max-width: 900px;
    margin: 2rem auto;
    padding: 1rem;
  }

  h2 {
    font-size: 1.8rem;
    margin-bottom: 1rem;
    color: #333;
  }

  section {
    background: white;
    padding: 20px;
    border-radius: 8px;
    margin-bottom: 20px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  }

  section h3 {
    margin-top: 0;
    color: #667eea;
    font-size: 1.4rem;
  }

  label {
    display: block;
    margin-top: 10px;
    font-weight: bold;
    color: #555;
  }

  input, select {
    width: 100%;
    padding: 10px;
    margin-top: 5px;
    border: 1px solid #ccc;
    border-radius: 5px;
    font-size: 1rem;
  }

  .toggle-switch {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-top: 10px;
  }

  .toggle-switch input {
    width: auto;
  }

  button {
    padding: 10px 20px;
    background: #667eea;
    color: white;
    border: none;
    border-radius: 5px;
    font-weight: bold;
    cursor: pointer;
    margin-top: 15px;
  }

  button:hover {
    background: #556cd6;
  }

  .danger-zone {
    background: #fee2e2;
    border: 1px solid #f5c2c2;
  }

  .danger-zone button {
    background: #b91c1c;
  }

  .danger-zone button:hover {
    background: #8b1515;
  }

  @media (max-width: 600px) {
    input, select {
      font-size: 0.9rem;
    }
    h2 {
      font-size: 1.5rem;
    }
  }
</style>

<div class="settings-container">

  <h2>Account Settings</h2>

  <!-- Account Information -->
  <section>
    <h3>Account Information</h3>
    <form action="/settings/update" method="POST" enctype="multipart/form-data">
      <label for="profilePicture">Profile Picture</label>
      <input type="file" id="profilePicture" name="profilePicture" accept="image/*">

      <label for="name">Name</label>
      <input type="text" id="name" name="name" value="<%= user ? user.name : '' %>" required>

      <label for="email">Email</label>
      <input type="email" id="email" name="email" value="<%= user ? user.email : '' %>" required>

      <label for="role">Role</label>
      <input type="text" id="role" name="role" value="<%= user ? user.roleName || user.role : '' %>" readonly>
  </section>

  <!-- Security Settings -->
  <section>
    <h3>Security Settings</h3>
    <label for="password">New Password</label>
    <input type="password" id="password" name="password" placeholder="•••••••">

    <label for="confirmPassword">Confirm Password</label>
    <input type="password" id="confirmPassword" name="confirmPassword" placeholder="•••••••">

    <div class="toggle-switch">
      <input type="checkbox" id="twoFactor" name="twoFactor">
      <label for="twoFactor">Enable Two-Factor Authentication</label>
    </div>
  </section>

  <!-- Privacy Settings -->
  <section>
    <h3>Privacy Settings</h3>
    <div class="toggle-switch">
      <input type="checkbox" id="accountVisibility" name="accountVisibility">
      <label for="accountVisibility">Make my profile private</label>
    </div>
    <div class="toggle-switch">
      <input type="checkbox" id="dataSharing" name="dataSharing">
      <label for="dataSharing">Allow data sharing with partners</label>
    </div>
  </section>

  <!-- Notification Settings -->
  <section>
    <h3>Notification Preferences</h3>
    <div class="toggle-switch">
      <input type="checkbox" id="emailNotifications" name="emailNotifications" checked>
      <label for="emailNotifications">Email notifications</label>
    </div>
    <div class="toggle-switch">
      <input type="checkbox" id="smsNotifications" name="smsNotifications">
      <label for="smsNotifications">SMS notifications</label>
    </div>
    <div class="toggle-switch">
      <input type="checkbox" id="pushNotifications" name="pushNotifications">
      <label for="pushNotifications">Push notifications</label>
    </div>
  </section>

  <!-- Connected Accounts -->
  <section>
    <h3>Connected Accounts</h3>
    <p>Connect your account to other services for a seamless experience.</p>
    <button type="button">Connect Google</button>
    <button type="button">Connect Facebook</button>
  </section>

  <!-- Language & Display -->
  <section>
    <h3>Language & Display</h3>
    <label for="language">Select Language</label>
    <select id="language" name="language">
      <option value="en" selected>English</option>
      <option value="sw">Swahili</option>
    </select>

    <div class="toggle-switch">
      <input type="checkbox" id="darkMode" name="darkMode">
      <label for="darkMode">Enable Dark Mode</label>
    </div>
  </section>

  <!-- Support -->
  <section>
    <h3>Support</h3>
    <p>If you need help, contact our support team or visit the help center.</p>
    <a href="/help" style="display:inline-block; padding:10px 15px; background:#667eea; color:white; border-radius:5px;">Help Center</a>
  </section>

  <!-- Danger Zone -->
  <section class="danger-zone">
    <h3>Danger Zone</h3>
    <p>These actions are irreversible.</p>
    <button type="submit" formaction="/settings/delete">Delete Account</button>
  </section>

  <!-- Save Changes -->
  <button type="submit">Save Changes</button>
  <a href="/" style="margin-left:10px; color:#667eea; font-weight:bold;">Go to Home</a>

  </form>
</div>

<%- include('partials/footer') %>
